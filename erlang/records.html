

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Erlang Records &mdash; Getting Started with Xapian 0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Getting Started with Xapian 0.1 documentation" href="../index.html" />
    <link rel="up" title="Erlang" href="index.html" />
    <link rel="prev" title="Erlang" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Erlang"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Getting Started with Xapian 0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Erlang</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="erlang-records">
<h1>Erlang Records<a class="headerlink" href="#erlang-records" title="Permalink to this headline">¶</a></h1>
<p>These records are defined inside <cite>include/xapian.hrl</cite> and can be included,
using the next attribute</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="p">-</span><span class="ni">include_lib</span><span class="p">(</span><span class="s">&quot;xapian/include/xapian.hrl&quot;</span><span class="p">).</span>
</pre></div>
</div>
<div class="section" id="x-term">
<h2>x_term<a class="headerlink" href="#x-term" title="Permalink to this headline">¶</a></h2>
<p>Term record.</p>
<div class="section" id="x-term-value">
<h3>x_term.value<a class="headerlink" href="#x-term-value" title="Permalink to this headline">¶</a></h3>
<p>The name of the term.
This field is required.</p>
</div>
<div class="section" id="x-term-position">
<h3>x_term.position<a class="headerlink" href="#x-term-position" title="Permalink to this headline">¶</a></h3>
<p>The position of the term.
If position = undefined, then we will use Xapian::Document::add_term,
otherwise Xapian::Document::add_posting.</p>
<p>You can put few positions as a list.</p>
<p><cite>#x_term{term=term, action=set, position=[]}</cite> deletes all positions
of the term=&#8221;term&#8221;.</p>
<p><cite>#x_term{action=set, position=[]}</cite> deletes all positions for all terms.</p>
<p>This field is optional.</p>
</div>
<div class="section" id="x-term-frequency">
<h3>x_term.frequency<a class="headerlink" href="#x-term-frequency" title="Permalink to this headline">¶</a></h3>
<p>The within-document frequency, or WDF, of a term t in D is the
number of times it is pulled out of D in the indexing process.
Usually this is the size of the wdp vector, but in Xapian it can
exceed it, since we can apply extra wdf to some parts of the
document text. For example, often this is done for the document
title and abstract to attach extra importance to their contents
compared to the rest of the document text.</p>
<p>WDF of the current term will be increase by this value when indexing.
If WDF = 0, then Xapian::Document::add_boolean_term will be called.</p>
<p>WDF can be <cite>{cur, integer()}</cite> or <cite>{abs, non_neg_integer()}</cite>.
1 means <cite>{cur, 1}</cite>.</p>
<p>All postings and terms with the same value have common WDF.</p>
<p>The defaut value of this field is 1.</p>
</div>
<div class="section" id="x-term-action">
<h3>x_term.action<a class="headerlink" href="#x-term-action" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>If position is undefined, then:</dt>
<dd><ul class="first last simple">
<li>If action = remove and WDF = 0, then the term will be deleted.</li>
<li>If action = remove and WDF != 0, then the term with exactly same
WDF will be deleted otherwise error will be occured (it can
be diabled with ignore = true).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>If position is an integer, then:</dt>
<dd><ul class="first last simple">
<li>If action = add, then posting will be added, WDF will be increased
with frequency.</li>
<li>If action = remove, then <cite>Xapian::Document::remove_posting</cite>
will be used.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">If the action is <cite>add</cite>, then the term must not exist.</p>
</li>
<li><p class="first">If the action is <cite>set</cite>, then don&#8217;t care about old version of the term.</p>
</li>
<li><p class="first">If the action is <cite>update</cite>, then the term must exist.</p>
</li>
</ul>
<p>The defaut value of this field is <cite>set</cite>.</p>
</div>
<div class="section" id="x-term-ignore">
<h3>x_term.ignore<a class="headerlink" href="#x-term-ignore" title="Permalink to this headline">¶</a></h3>
<p>Ignore errors.</p>
<ul class="simple">
<li>If <cite>action = add AND ignore</cite>,
then if a term exists, then it will be skipped.</li>
<li>If <cite>action = add AND NOT ignore</cite>,
then if a term exists, then an an exception will be thrown.</li>
<li>If <cite>action = update AND ignore</cite>,
then if a term exists, then it will be skipped.</li>
<li>If <cite>action = update AND NOT ignore</cite>,
then if a term not exists, then an an exception will be thrown.</li>
<li>If <cite>action = set</cite>,
then if a term exists, then it will be rewritten.</li>
<li>If <cite>action = set</cite>,
then if a term does not exist, then it will be created.</li>
<li>If <cite>action = remove</cite>,
then if a term exists, then it will be deleted.</li>
<li>If <cite>action = remove AND ignore</cite>,
then if a term does not exist, then it will be skipped.</li>
<li>If <cite>action = remove AND NOT ignore</cite>,
then if a term does not exist, then an an exception will be thrown.</li>
</ul>
<p>The default value of this field is <cite>true</cite>.</p>
</div>
</div>
<div class="section" id="x-prefix-name">
<h2>x_prefix_name<a class="headerlink" href="#x-prefix-name" title="Permalink to this headline">¶</a></h2>
<p>Describes meta-information about term prefixes.</p>
<p>This record is used with <cite>xapian_server:open</cite> or with <cite>QueryParser</cite>
as a parameter.</p>
<p>Here is the C++ and Erlang versions of the same code.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">queryparser</span><span class="p">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span> <span class="s">&quot;S&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nl">#x_prefix_name</span><span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=&lt;&lt;</span><span class="s">&quot;S&quot;</span><span class="o">&gt;&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>It contains alternative name for keys.
Xapian is schemaless, so the schema is storing in the client code.
Prefixes are a part of the schema.</p>
<p><cite>is_boolean</cite>, <cite>is_exclusive</cite> and <cite>is_default</cite> are only
important for QueryParser.</p>
<div class="section" id="x-prefix-name-name">
<h3>x_prefix_name.name<a class="headerlink" href="#x-prefix-name-name" title="Permalink to this headline">¶</a></h3>
<p>It is a full field name.</p>
<p>A prefix name <cite>#x_prefix_name.name</cite> is a pseudonym for prefix
<cite>#x_prefix_name.prefix</cite>.</p>
<p>This name is for a client and the prefix is for Xapian.</p>
<p>A prefix name is usually an atom, because of speed.
But it can be any iolist, it will be converted into a binary with
<cite>iolist_to_binary</cite> before to pass to Xapian (for example, it will be
passed for <cite>QueryParser</cite>).</p>
<p>In Erlang code, the name can be a term, but it will be matched with an
operator <cite>=:=</cite>.
That is why,
<tt class="docutils literal"><span class="pre">#x_prefix_name{name=&quot;author&quot;}</span></tt> and <tt class="docutils literal"><span class="pre">#x_prefix_name{name=author}</span></tt>
are different prefixes. That is why just use atoms for names everywhere.</p>
</div>
<div class="section" id="x-prefix-name-prefix">
<h3>x_prefix_name.prefix<a class="headerlink" href="#x-prefix-name-prefix" title="Permalink to this headline">¶</a></h3>
<p>It is a short field name.</p>
<p>This value is used internally by Xapian.
It often is an uppercase letter, so it can be a char, for example,
<tt class="docutils literal"><span class="pre">#x_prefix_name{prefix=$A,</span> <span class="pre">name=author}</span></tt>.</p>
<p>There is no difference in the format for this field.</p>
</div>
<div class="section" id="x-prefix-name-is-boolean">
<h3>x_prefix_name.is_boolean<a class="headerlink" href="#x-prefix-name-is-boolean" title="Permalink to this headline">¶</a></h3>
<p>If true, then QueryParser will combine this prefix
with <cite>Xapian::Query::OP_FILTER</cite>.</p>
<p>This allows to use <cite>field:value</cite> for retrieve only documents, that have
the field with the name <cite>field</cite> and the value <cite>value</cite>.</p>
<p>For example, we want to search for books about Erlang, then we can pass
<cite>#x_prefix_name{name = language, prefix = $L}</cite> as a config parameter and
call a parser with a query string <cite>&#8220;language:erlang process linux OTP&#8221;</cite>.</p>
<p>This field is only used with <cite>Xapian::QueryParser</cite>.</p>
<p>If <cite>true</cite>, then this method will be called:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">Xapian</span><span class="o">::</span><span class="n">QueryParser</span><span class="o">::</span><span class="n">add_boolean_prefix</span>
</pre></div>
</div>
</div>
<div class="section" id="x-prefix-name-is-exclusive">
<h3>x_prefix_name.is_exclusive<a class="headerlink" href="#x-prefix-name-is-exclusive" title="Permalink to this headline">¶</a></h3>
<p>This field is used by <cite>QueryParser</cite>.</p>
<p>If <cite>true</cite>, each document can have at most one term with this prefix,
so multiple filters with this prefix should be combined with <cite>OR</cite>.</p>
<p>If <cite>false</cite>, each document can have multiple terms with this prefix,
so multiple filters should be combined with <cite>AND</cite>, like happens with
filters with different prefixes.</p>
<p>Ignored, if <cite>is_boolean</cite> is not <cite>true</cite>.</p>
</div>
<div class="section" id="x-prefix-name-is-default">
<h3>x_prefix_name.is_default<a class="headerlink" href="#x-prefix-name-is-default" title="Permalink to this headline">¶</a></h3>
<p>This rule only used, when this record is passed as a parameter of
the <cite>xapian_server:open</cite> method.</p>
<ul class="simple">
<li>If <cite>true</cite>, this rule will be applied for a default <cite>QueryParser</cite>.</li>
<li>If <cite>false</cite>, this rule will be ignored for a default <cite>QueryParser</cite>.</li>
</ul>
</div>
</div>
<div class="section" id="x-value-name">
<h2>x_value_name<a class="headerlink" href="#x-value-name" title="Permalink to this headline">¶</a></h2>
<p>Xapian uses slots for storing information inside a document. Values
are not indexed for fulltext search, but can be used for sorting or filtering.
A slot is an unsigned integer. For example, you can use slot 0 for a price and
slot 1 for an year.</p>
<p>Erlang Bindings allows to use atoms as an id for a slot number.</p>
<div class="section" id="x-value-name-name">
<h3>x_value_name.name<a class="headerlink" href="#x-value-name-name" title="Permalink to this headline">¶</a></h3>
<p>It is a full field name. It is an atom, because it used as a record field name
from MSet QLC tables.</p>
</div>
<div class="section" id="x-value-name-slot">
<h3>x_value_name.slot<a class="headerlink" href="#x-value-name-slot" title="Permalink to this headline">¶</a></h3>
<p>It is a positive integer or zero. It is used by Xapian as a nubmer of slot.</p>
</div>
<div class="section" id="x-value-name-type">
<h3>x_value_name.type<a class="headerlink" href="#x-value-name-type" title="Permalink to this headline">¶</a></h3>
<p>It can be:</p>
<ul>
<li><p class="first">string - by default;</p>
</li>
<li><dl class="first docutils">
<dt>float - a value in the slot is double. It will be serialized. It can be</dt>
<dd><p class="first last">sorted in the numerical order. For example, this slot can be used for
storing information about prices with this type.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="x-match-set">
<h2>x_match_set<a class="headerlink" href="#x-match-set" title="Permalink to this headline">¶</a></h2>
<p>This record is used because to decrease a count of parameters of the
<cite>xapian_server:match_set/2</cite> function.</p>
<div class="section" id="x-match-set-enquire">
<h3>x_match_set.enquire<a class="headerlink" href="#x-match-set-enquire" title="Permalink to this headline">¶</a></h3>
<p>This field is an enquire resource that defines a set of documents to handle.
It is required.</p>
</div>
<div class="section" id="x-match-set-offset">
<h3>x_match_set.offset<a class="headerlink" href="#x-match-set-offset" title="Permalink to this headline">¶</a></h3>
<p>This field  contains non negative integer, that means how many objects to skip
from the beginning.
The default value is 0.</p>
</div>
<div class="section" id="x-match-set-max-items">
<h3>x_match_set.max_items<a class="headerlink" href="#x-match-set-max-items" title="Permalink to this headline">¶</a></h3>
<p>This field means the maximum count of the records inside the set.
<cite>undefined</cite> means all documents (this is by default).</p>
</div>
<div class="section" id="x-match-set-check-at-least">
<h3>x_match_set.check_at_least<a class="headerlink" href="#x-match-set-check-at-least" title="Permalink to this headline">¶</a></h3>
<p>It contains the minimum count of documents,
which will be processed by <cite>MatchSpy</cite>.</p>
<p>Actually, the lower count of documents can be passed to <cite>MatchSpy</cite>.
That means, that the count of matched documents is lower than the
<cite>check_at_least</cite> value.</p>
<p>The default value is 0.</p>
</div>
<div class="section" id="x-match-set-spies">
<h3>x_match_set.spies<a class="headerlink" href="#x-match-set-spies" title="Permalink to this headline">¶</a></h3>
<p>Contains a list of resources of objects, which will calculate
statistics while a query will be processed.</p>
</div>
</div>
<div class="section" id="x-enquire">
<h2>x_enquire<a class="headerlink" href="#x-enquire" title="Permalink to this headline">¶</a></h2>
<div class="section" id="x-enquire-value">
<h3>x_enquire.value<a class="headerlink" href="#x-enquire-value" title="Permalink to this headline">¶</a></h3>
<p>It is required. It holds a query.</p>
</div>
<div class="section" id="x-enquire-query-len">
<h3>x_enquire.query_len<a class="headerlink" href="#x-enquire-query-len" title="Permalink to this headline">¶</a></h3>
<p>The query length to use in weight calculations.
By default (0 value) the sum of the wqf of all terms is used.</p>
</div>
<div class="section" id="x-enquire-order">
<h3>x_enquire.order<a class="headerlink" href="#x-enquire-order" title="Permalink to this headline">¶</a></h3>
<p>Primary document order.
Documents will be sorted by <cite>relevance</cite> by default.
<cite>#x_sort_order{}</cite> allows to use an advanced document order.</p>
</div>
<div class="section" id="x-enquire-docid-order">
<h3>x_enquire.docid_order<a class="headerlink" href="#x-enquire-docid-order" title="Permalink to this headline">¶</a></h3>
<p>Secondary document order.</p>
<ul class="simple">
<li><cite>desc</cite> - descending document order;</li>
<li><cite>asc</cite> and <cite>default</cite> are equal and mean ascending document order;</li>
<li><cite>dont_care and `undefined</cite> are equal.</li>
</ul>
<p>Set the direction in which documents are ordered by document id
in the returned MSet.</p>
<p>This order only has an effect on documents which would otherwise have
equal rank. For a weighted probabilistic match with no sort value, this
means documents with equal weight. For a boolean match, with no sort
value, this means all documents.
And if a sort value is used, this means documents with equal sort value
(and also equal weight if ordering on relevance after the sort).</p>
<p>Note: If you add documents in strict date order, then a boolean search
is a very efficient way to perform &#8220;sort by date, newest first&#8221;.</p>
<p>i.e.</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="k">try</span>
    <span class="nv">WS</span> <span class="o">=</span> <span class="nn">xapian_resource</span><span class="p">:</span><span class="n">bool_weight</span><span class="p">(</span><span class="nv">Server</span><span class="p">),</span>
    <span class="nl">#x_enquire</span><span class="p">{</span><span class="n">weighting_scheme</span> <span class="o">=</span> <span class="nv">WS</span><span class="p">,</span> <span class="n">docid_order</span> <span class="o">=</span> <span class="n">desc</span><span class="p">}</span>
    <span class="p">...</span>
<span class="k">after</span>
    <span class="nn">xapian_server</span><span class="p">:</span><span class="n">release_resource</span><span class="p">(</span><span class="nv">WS</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="x-enquire-weighting-scheme">
<h3>x_enquire.weighting_scheme<a class="headerlink" href="#x-enquire-weighting-scheme" title="Permalink to this headline">¶</a></h3>
<p>Weighting scheme.
It is a resource defines how to rank documents.</p>
</div>
<div class="section" id="x-enquire-percent-cutoff">
<h3>x_enquire.percent_cutoff<a class="headerlink" href="#x-enquire-percent-cutoff" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="x-enquire-weight-cutoff">
<h3>x_enquire.weight_cutoff<a class="headerlink" href="#x-enquire-weight-cutoff" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="x-enquire-collapse-key">
<h3>x_enquire.collapse_key<a class="headerlink" href="#x-enquire-collapse-key" title="Permalink to this headline">¶</a></h3>
<p>Defines the slot in which the same values will be collapsed
(each valuae of the slot will be repeated only once).
It is <cite>undefined</cite> by default. That means that this feature is disabled.</p>
</div>
<div class="section" id="x-enquire-collapse-max">
<h3>x_enquire.collapse_max<a class="headerlink" href="#x-enquire-collapse-max" title="Permalink to this headline">¶</a></h3>
<p>number of items with the same key to leave after collapsing.
The default value is 1.</p>
</div>
</div>
<div class="section" id="x-query-parser">
<h2>x_query_parser<a class="headerlink" href="#x-query-parser" title="Permalink to this headline">¶</a></h2>
<p>Converts a string, constructed using the special
[syntax](<a class="reference external" href="http://xapian.org/docs/queryparser.html">http://xapian.org/docs/queryparser.html</a>) into a query.</p>
<p>These records are equal:</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nl">#x_query</span><span class="p">{</span><span class="n">op</span><span class="o">=</span><span class="n">&#39;OR&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">[</span>
    <span class="nl">#x_query_term</span><span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;weather&quot;</span><span class="p">},</span>
    <span class="nl">#x_query_term</span><span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;forecast&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">8</span><span class="p">}]}</span>
</pre></div>
</div>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nl">#x_query_parser</span><span class="p">{</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;weather forecast&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>There are few predefined parsers:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="38%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Stemmer</th>
<th class="head">Prefixes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>default</td>
<td>from open params</td>
<td>from open params</td>
</tr>
<tr class="row-odd"><td>standard</td>
<td>not defined</td>
<td>not defined</td>
</tr>
</tbody>
</table>
<div class="section" id="x-query-parser-name">
<h3>x_query_parser.name<a class="headerlink" href="#x-query-parser-name" title="Permalink to this headline">¶</a></h3>
<p>It is a parser type to use as a prototype to extend.</p>
<ul>
<li><p class="first"><cite>standard</cite> - the basic Xapian parser will be selected;</p>
</li>
<li><dl class="first docutils">
<dt><cite>default</cite> - the parser with a stemmer, which is passed to</dt>
<dd><p class="first last"><cite>xapian_server:open/2</cite> will be selected.</p>
</dd>
</dl>
</li>
</ul>
<p>If a stemmer did not passed to <cite>xapian_server:open/2</cite>, then <cite>standard</cite> and
<cite>default</cite> parsers uses the same stemmer.</p>
<p>It the name is not defined, then <cite>default</cite> will be used.</p>
</div>
<div class="section" id="x-query-parser-stemmer">
<h3>x_query_parser.stemmer<a class="headerlink" href="#x-query-parser-stemmer" title="Permalink to this headline">¶</a></h3>
<p>When this field is <cite>undefined</cite>:
* and <cite>name</cite> is <cite>standard</cite> - the <cite>standard</cite> stemmer will be used;
* and <cite>name</cite> is <cite>default</cite> - the stemmer, passed into <cite>xapian_server:open/2</cite> will be used.</p>
<p>Pass <cite>#x_stemmer{}</cite> to use another stemmer.</p>
</div>
<div class="section" id="x-query-parser-stemming-strategy">
<h3>x_query_parser.stemming_strategy<a class="headerlink" href="#x-query-parser-stemming-strategy" title="Permalink to this headline">¶</a></h3>
<p>Set the stemming strategy.</p>
<p>This controls how the query parser will apply the stemming algorithm.
Note that the stemming algorithm is only applied to words in probabilistic
fields - boolean filter terms are never stemmed.</p>
<p>Possible values are:</p>
<ul>
<li><p class="first"><cite>none</cite>: Don&#8217;t perform any stemming (the default).</p>
</li>
<li><dl class="first docutils">
<dt><cite>some</cite>: Search for stemmed forms of terms except for those which start with</dt>
<dd><p class="first last">a capital letter, or are followed by certain characters
(currently: <cite>(</cite>, <cite>/</cite>, <cite>&#64;</cite>, <cite>&lt;</cite>, <cite>&gt;</cite>, <cite>=</cite>, <cite>*</cite>, <cite>[</cite>, <cite>{</cite>, <cite>&#8220;</cite>, <cite></cite>),
or are used with operators which need
positional information. Stemmed terms are prefixed with &#8216;Z&#8217;.</p>
</dd>
</dl>
</li>
<li><p class="first"><cite>all</cite>:  Search for stemmed forms of all words (note: no &#8216;Z&#8217; prefix is added).</p>
</li>
</ul>
</div>
<div class="section" id="x-query-parser-max-wildcard-expansion">
<h3>x_query_parser.max_wildcard_expansion<a class="headerlink" href="#x-query-parser-max-wildcard-expansion" title="Permalink to this headline">¶</a></h3>
<p>0 or <cite>unlimited</cite> for no limit (by default).</p>
</div>
<div class="section" id="x-query-parser-default-op">
<h3>x_query_parser.default_op<a class="headerlink" href="#x-query-parser-default-op" title="Permalink to this headline">¶</a></h3>
<p>It is a default operator for combining terms.
The most useful values for this are <cite>&#8216;OR&#8217;</cite> (the default) and <cite>&#8216;AND&#8217;</cite>. <cite>&#8216;NEAR&#8217;</cite>
and <cite>&#8216;PHRASE&#8217;</cite> can also be useful.</p>
<p>So for example, &#8216;weather forecast&#8217; is parsed as if it were
&#8216;weather OR forecast&#8217; by default.</p>
</div>
<div class="section" id="x-query-parser-prefixes">
<h3>x_query_parser.prefixes<a class="headerlink" href="#x-query-parser-prefixes" title="Permalink to this headline">¶</a></h3>
<p>A list of <cite>#x_prefix_name{}</cite> can be passed.
If defined, then these prefixes will be added to existed prefixes.</p>
<p><cite>Xapian::QueryParser::add_prefix</cite> will be called for each prefix.</p>
<dl class="docutils">
<dt>If <cite>name</cite> = <cite>default</cite>, then default prefixes</dt>
<dd>(prefixes, passed to <cite>xapian_server:open/2</cite>) will be already added.</dd>
</dl>
<p>If <cite>name</cite> = <cite>standard</cite>, then default prefixes will be ignored.</p>
</div>
</div>
<div class="section" id="x-query">
<h2>x_query<a class="headerlink" href="#x-query" title="Permalink to this headline">¶</a></h2>
<p>Two next expressions are equal</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nn">xapian_server</span><span class="p">:</span><span class="n">enquire</span><span class="p">(</span><span class="nv">Server</span><span class="p">,</span> <span class="s">&quot;erlang&quot;</span><span class="p">).</span>
</pre></div>
</div>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nv">Query</span> <span class="o">=</span> <span class="nl">#x_term</span><span class="p">{</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;erlang&quot;</span><span class="p">},</span>
<span class="nn">xapian_server</span><span class="p">:</span><span class="n">enquire</span><span class="p">(</span><span class="nv">Server</span><span class="p">,</span> <span class="nv">Query</span><span class="p">).</span>
</pre></div>
</div>
<p>If you want search by few terms, use</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nv">Query</span> <span class="o">=</span> <span class="nl">#x_query</span><span class="p">{</span><span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;erlang&quot;</span><span class="p">,</span> <span class="s">&quot;haskell&quot;</span><span class="p">]}.</span>
</pre></div>
</div>
<p>Here &#8220;erlang&#8221; and &#8220;haskell&#8221; will be combined with &#8220;AND&#8221;.</p>
<p>You can combain them with &#8220;OR&#8221; operator</p>
<div class="highlight-erlang"><div class="highlight"><pre><span class="nv">Query</span> <span class="o">=</span> <span class="nl">#x_query</span><span class="p">{</span><span class="n">op</span><span class="o">=</span><span class="n">&#39;OR&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;erlang&quot;</span><span class="p">,</span> <span class="s">&quot;haskell&quot;</span><span class="p">,</span> <span class="s">&quot;ocalm&quot;</span><span class="p">]}.</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Erlang Records</a><ul>
<li><a class="reference internal" href="#x-term">x_term</a><ul>
<li><a class="reference internal" href="#x-term-value">x_term.value</a></li>
<li><a class="reference internal" href="#x-term-position">x_term.position</a></li>
<li><a class="reference internal" href="#x-term-frequency">x_term.frequency</a></li>
<li><a class="reference internal" href="#x-term-action">x_term.action</a></li>
<li><a class="reference internal" href="#x-term-ignore">x_term.ignore</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-prefix-name">x_prefix_name</a><ul>
<li><a class="reference internal" href="#x-prefix-name-name">x_prefix_name.name</a></li>
<li><a class="reference internal" href="#x-prefix-name-prefix">x_prefix_name.prefix</a></li>
<li><a class="reference internal" href="#x-prefix-name-is-boolean">x_prefix_name.is_boolean</a></li>
<li><a class="reference internal" href="#x-prefix-name-is-exclusive">x_prefix_name.is_exclusive</a></li>
<li><a class="reference internal" href="#x-prefix-name-is-default">x_prefix_name.is_default</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-value-name">x_value_name</a><ul>
<li><a class="reference internal" href="#x-value-name-name">x_value_name.name</a></li>
<li><a class="reference internal" href="#x-value-name-slot">x_value_name.slot</a></li>
<li><a class="reference internal" href="#x-value-name-type">x_value_name.type</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-match-set">x_match_set</a><ul>
<li><a class="reference internal" href="#x-match-set-enquire">x_match_set.enquire</a></li>
<li><a class="reference internal" href="#x-match-set-offset">x_match_set.offset</a></li>
<li><a class="reference internal" href="#x-match-set-max-items">x_match_set.max_items</a></li>
<li><a class="reference internal" href="#x-match-set-check-at-least">x_match_set.check_at_least</a></li>
<li><a class="reference internal" href="#x-match-set-spies">x_match_set.spies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-enquire">x_enquire</a><ul>
<li><a class="reference internal" href="#x-enquire-value">x_enquire.value</a></li>
<li><a class="reference internal" href="#x-enquire-query-len">x_enquire.query_len</a></li>
<li><a class="reference internal" href="#x-enquire-order">x_enquire.order</a></li>
<li><a class="reference internal" href="#x-enquire-docid-order">x_enquire.docid_order</a></li>
<li><a class="reference internal" href="#x-enquire-weighting-scheme">x_enquire.weighting_scheme</a></li>
<li><a class="reference internal" href="#x-enquire-percent-cutoff">x_enquire.percent_cutoff</a></li>
<li><a class="reference internal" href="#x-enquire-weight-cutoff">x_enquire.weight_cutoff</a></li>
<li><a class="reference internal" href="#x-enquire-collapse-key">x_enquire.collapse_key</a></li>
<li><a class="reference internal" href="#x-enquire-collapse-max">x_enquire.collapse_max</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-query-parser">x_query_parser</a><ul>
<li><a class="reference internal" href="#x-query-parser-name">x_query_parser.name</a></li>
<li><a class="reference internal" href="#x-query-parser-stemmer">x_query_parser.stemmer</a></li>
<li><a class="reference internal" href="#x-query-parser-stemming-strategy">x_query_parser.stemming_strategy</a></li>
<li><a class="reference internal" href="#x-query-parser-max-wildcard-expansion">x_query_parser.max_wildcard_expansion</a></li>
<li><a class="reference internal" href="#x-query-parser-default-op">x_query_parser.default_op</a></li>
<li><a class="reference internal" href="#x-query-parser-prefixes">x_query_parser.prefixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x-query">x_query</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Erlang</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/erlang/records.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Erlang"
             >previous</a> |</li>
        <li><a href="../index.html">Getting Started with Xapian 0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Erlang</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Olly Betts, Richard Boulton, Justin Finkelstein, James Aylett.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>